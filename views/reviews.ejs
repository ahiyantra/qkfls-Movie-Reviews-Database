<!DOCTYPE html>
<html>
  <head>
    <%- include('head', {title: 'Movie Database - Reviews'}); %>
  </head>

  <body>
    <%- include('header'); %>

    <section class="section">
      <div class="container is-fluid">
        <h1 class="is-size-1 p-6">Current Reviews</h1>

        <% if (msg.errors) { %>
          <div class="content">
            <h1 style="color: red">Errors:</h1>
            <ol type="1">
              <% msg.errors.forEach(function(error){ %>
              <li style="color: red"><%= error %></li>
              <%});%>
            </ol>
          </div>
        <% } else { %>

          <% msg.result.forEach(function(reviews){ %>
            <div class="tile is-ancestor">
              <div class="tile is-parent">
                <% if (!reviews || !reviews.sentiment) { %>
                  <article class="tile is-child box">
                <% } else if(reviews.sentiment === 'positive') {%>
                  <article class="tile is-child box notification is-primary">
                <% } else if(reviews.sentiment === 'negative') {%>
                  <article class="tile is-child box notification is-warning">
                <% } else { %>
                  <article class="tile is-child box">
                <% } %>
                <p class="title"><%= reviews.movie %></p>
                <p class="subtitle">
                  <%= reviews.firstName %> <%= reviews.lastName %>
                </p>
                <div class="content">
                  <%= reviews.review %>
                </div>
              </article>
            </div>
          </div>
          <% })} %>          

      </div>
    </section>
    <%- include('footer'); %>
  </body>
</html>
